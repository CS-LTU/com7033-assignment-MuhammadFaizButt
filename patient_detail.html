{% extends "base.html" %}

{% block title %}Patient Details - Stroke Prediction System{% endblock %}

{% block content %}
<div class="card">
    <h2>Patient Details - ID: {{ patient.id }}</h2>
    
    <div style="margin-top: 20px;">
        <a href="{{ url_for('patients') }}" class="btn btn-secondary">Back to List</a>
        <a href="{{ url_for('edit_patient', patient_id=patient.id) }}" class="btn btn-primary">Edit Patient</a>
        <form method="POST" action="{{ url_for('delete_patient', patient_id=patient.id) }}" style="display: inline;">
            <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this patient?')">Delete Patient</button>
        </form>
    </div>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 30px;">
        <div>
            <h3>Personal Information</h3>
            <table style="width: 100%;">
                <tr>
                    <td style="font-weight: bold;">ID:</td>
                    <td>{{ patient.id }}</td>
                </tr>
                <tr>
                    <td style="font-weight: bold;">Gender:</td>
                    <td>{{ patient.gender }}</td>
                </tr>
                <tr>
                    <td style="font-weight: bold;">Age:</td>
                    <td>{{ patient.age }} years</td>
                </tr>
                <tr>
                    <td style="font-weight: bold;">Ever Married:</td>
                    <td>{{ patient.ever_married }}</td>
                </tr>
                <tr>
                    <td style="font-weight: bold;">Work Type:</td>
                    <td>{{ patient.work_type }}</td>
                </tr>
                <tr>
                    <td style="font-weight: bold;">Residence Type:</td>
                    <td>{{ patient.Residence_type }}</td>
                </tr>
            </table>
        </div>
        
        <div>
            <h3>Medical Information</h3>
            <table style="width: 100%;">
                <tr>
                    <td style="font-weight: bold;">Hypertension:</td>
                    <td>{{ 'Yes' if patient.hypertension == 1 else 'No' }}</td>
                </tr>
                <tr>
                    <td style="font-weight: bold;">Heart Disease:</td>
                    <td>{{ 'Yes' if patient.heart_disease == 1 else 'No' }}</td>
                </tr>
                <tr>
                    <td style="font-weight: bold;">Average Glucose Level:</td>
                    <td>{{ patient.avg_glucose_level }} mg/dL</td>
                </tr>
                <tr>
                    <td style="font-weight: bold;">BMI:</td>
                    <td>{{ patient.bmi if patient.bmi else 'N/A' }}</td>
                </tr>
                <tr>
                    <td style="font-weight: bold;">Smoking Status:</td>
                    <td>{{ patient.smoking_status }}</td>
                </tr>
                <tr>
                    <td style="font-weight: bold;">Stroke:</td>
                    <td style="color: {{ 'red' if patient.stroke == 1 else 'green' }}; font-weight: bold;">
                        {{ 'Yes - Had Stroke' if patient.stroke == 1 else 'No - No Stroke' }}
                    </td>
                </tr>
            </table>
        </div>
    </div>
    
    <div style="margin-top: 30px; padding: 20px; background: {{ '#ffebee' if patient.stroke == 1 else '#e8f5e9' }}; border-radius: 5px;">
        <h3>Stroke Risk Assessment</h3>
        <p style="font-size: 16px; color: {{ '#c62828' if patient.stroke == 1 else '#2e7d32' }};">
            {% if patient.stroke == 1 %}
                ⚠️ This patient has had a stroke. Immediate medical attention and monitoring required.
            {% else %}
                ✅ This patient has not had a stroke. Continue preventive care and monitoring.
            {% endif %}
        </p>
    </div>
</div>
{% endblock %}
